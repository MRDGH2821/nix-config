# Sample environment file for pgAdmin OAUTH2 configuration
# Copy this to a secure location (e.g. pgadmin.env) and do NOT commit secrets to git.
# You can either provide a full JSON configuration via OAUTH2_CONFIG_JSON
# or provide individual variables for a single provider.

# Comma-separated authentication sources (defaults to "oauth2,internal")
AUTHENTICATION_SOURCES=oauth2,internal

# Whether to auto-create users when logging in via OAuth2 (true/false)
OAUTH2_AUTO_CREATE_USER=true

# Full JSON override (one-liner). If set, this takes precedence over individual vars.
# Example (keep on one line or escape newlines):
# OAUTH2_CONFIG_JSON='[{"OAUTH2_NAME":"authentik","OAUTH2_DISPLAY_NAME":"authentik","OAUTH2_CLIENT_ID":"<id>","OAUTH2_CLIENT_SECRET":"<secret>","OAUTH2_TOKEN_URL":"https://authentik.company/application/o/token/","OAUTH2_AUTHORIZATION_URL":"https://authentik.company/application/o/authorize/","OAUTH2_API_BASE_URL":"https://authentik.company/","OAUTH2_USERINFO_ENDPOINT":"https://authentik.company/application/o/userinfo/","OAUTH2_SERVER_METADATA_URL":"https://authentik.company/application/o/<application_slug>/.well-known/openid-configuration","OAUTH2_SCOPE":"openid email profile","OAUTH2_ICON":"fa-key","OAUTH2_BUTTON_COLOR":"#000000"}]'

# --- Individual provider variables (used if OAUTH2_CONFIG_JSON is not set) ---
OAUTH2_NAME=authentik
OAUTH2_DISPLAY_NAME=authentik
OAUTH2_CLIENT_ID=<Client ID from authentik>
OAUTH2_CLIENT_SECRET=<Client secret from authentik>
OAUTH2_TOKEN_URL=https://authentik.company/application/o/token/
OAUTH2_AUTHORIZATION_URL=https://authentik.company/application/o/authorize/
OAUTH2_API_BASE_URL=https://authentik.company/
OAUTH2_USERINFO_ENDPOINT=https://authentik.company/application/o/userinfo/
OAUTH2_SERVER_METADATA_URL=https://authentik.company/application/o/<application_slug>/.well-known/openid-configuration
OAUTH2_SCOPE="openid email profile"
OAUTH2_ICON=fa-key
OAUTH2_BUTTON_COLOR=#000000

# Security note: store the real client secret in your secrets manager (SOPS/age) or
# in a protected file with restrictive permissions. Do not commit it into your repo.
